<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AlpHFAbet: Teacher Applicant</title>
    <link rel="stylesheet" href="teacher.css" />
    <link rel="stylesheet" href="teacher-content.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <script type="module" src="../check-auth.js"></script>
  </head>

  <body>
    <!-- Top Navigation Bar -->
    <header>
      <nav class="navbar">
        <button id="open-sidebar" title="open-sidebar"><i class="fas fa-bars"></i></button>
        <a href="#" class="logo">
          <img src="../assets/transparent_logo.png" alt="school_logo" />
        </a>
        <h3 class="schoolname">Holy Family Academy of Sta Maria Bulacan Inc.</h3>
      </nav>
    </header>

    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <button id="close-sidebar" title="Close Menu"><i class="fas fa-times"></i></button>

      <div class="user-info">
        <h3 class="Teacher-name">Teacher Name</h3>

      </div>

      <nav class="sidebar-nav">
        <ul class="sidebar-links">
          <li>
            <a href="#dashboard">
              <i class="fa-solid fa-house"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="#application-status">
              <i class="fas fa-file-alt"></i>
              <span>Application Status</span>
            </a>
          </li>
        </ul>
        <nav class="profile-links">
          <ul class="sidebar-links">
            <li>
              <a href="#profile-settings">
                <i class="fas fa-user"></i>
                <span>Profile Settings</span>
              </a>
            </li>
            <li class="logout-link">
              <a href="#" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sign Out</span>
              </a>
            </li>
          </ul>
        </nav>
      </nav>
    </aside>

    <main class="applicant-content">
      <!-- Main Content -->
      <section id="dashboard">
        <!-- Application Status Section -->
        <div class="main-content">
          <div class="section-container">
            <div class="dashboard-header">
              <h1>Applicant's Dashboard</h1>
              <div class="header-actions">
                <div class="datetime-widget">
                  <div class="current-date" id="current-date">September 5, 2023</div>
                  <div class="current-time" id="current-time">10:15 AM</div>
                </div>
              </div>
            </div>

            <!-- NEW: Overview cards -->
            <div class="dashboard-overview">
              <div class="overview-cards">

                <div class="card card-id">
                  <div class="card-title">Application</div>
                  <div class="card-value">ID: <strong id="app-id">TEACH-12345</strong></div>
                  <div class="card-sub">Submitted: <span id="app-submitted-date">Jan 15, 2024</span></div>
                </div>

                <div class="card card-status">
                  <div class="card-title">Status</div>
                  <div class="card-value"><span id="app-status" class="status-badge status-reviewing">Reviewing</span>
                  </div>
                  <div class="card-sub" id="next-step">Next: Initial screening</div>
                </div>

                <div class="card card-next">
                  <div class="card-title">Next Step</div>
                  <div class="card-value" id="next-action">No interview scheduled</div>

                </div>
              </div>
            </div>

            <div class="status-activity-grid">

              <!-- LEFT: Timeline column -->
              <div class="timeline-column">
                <div class="status-timeline" id="status-timeline">

                  <div class="status-header">
                    <h2>Application Timeline</h2>
                  </div>

                  <div class="timeline-item" data-step="submitted">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>Application Submitted</h3>
                      <p class="time"> - </p>
                      <p>Your application documents have been submitted.</p>
                    </div>
                  </div>

                  <div class="timeline-item" data-step="screening">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>Initial Screening</h3>
                      <p class="time"> - </p>
                      <p>Your qualifications have been reviewed.</p>
                    </div>
                  </div>

                  <div class="timeline-item" data-step="interview">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>Interview Scheduled</h3>
                      <p class="time" id="interview-date">—</p>
                      <p id="interview-details">No interview scheduled.</p>
                    </div>
                  </div>

                  <div class="timeline-item" data-step="demo">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>Demo Teaching</h3>
                      <p>Pending</p>
                      <p>Will be scheduled after successful interview.</p>
                    </div>
                  </div>

                  <div class="timeline-item" data-step="result">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>Pass or Fail</h3>
                      <p id="decision-status">Pending</p>
                      <p>Will be determined after the demo teaching.</p>
                    </div>
                  </div>

                  <div class="timeline-item" data-step="decision">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <h3>On boarding</h3>
                      <p>Pending</p>
                      <p>Administration will review all evaluation results.</p>
                    </div>
                  </div>

                  <!-- Attachments inside timeline -->
                  <div class="timeline-item attachments-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                      <div class="panel-header">
                        <h3>Attachments</h3>
                        <div class="panel-actions">
                          <button id="btn-upload" class="btn small"><i class="fas fa-upload"></i> Upload</button>
                        </div>
                      </div>

                      <ul id="attachments-list" class="attachments-list">
                        <!-- injected by JS -->
                      </ul>
                    </div>
                  </div>

                </div><!-- /.status-timeline -->
              </div><!-- /.timeline-column -->

              <!-- RIGHT: activity column (messages + notifications) -->
              <div class="activity-column">

                <div class="attachments-messages-row">
                  <div class="messages-panel">
                    <div class="panel-header">
                      <h4>Messages</h4>
                      <div class="panel-actions">
                        <button id="btn-compose" class="btn small"><i class="fas fa-edit"></i> Compose</button>
                      </div>
                    </div>
                    <div id="note-list" class="note-list">
                      <!-- injected by JS -->
                    </div>
                  </div>

                  <div class="notification-panel">
                    <div class="panel-header">
                      <h4>Notifications</h4>
                    </div>
                    <div id="notif-list" class="notif-list">
                      <!-- injected by JS -->
                    </div>
                  </div>
                </div>
              </div><!-- /.activity-column -->
            </div><!-- /.status-activity-grid -->
          </div>
        </div>
        
        <!-- Hidden file input for uploads -->
        <input type="file" id="file-input" multiple style="display:none" />

        <!-- Small modals (simple, UI-only) -->
        <div id="modal-root" aria-live="polite"></div>

        <!-- send message modal -->
        <div id="hfaMsgModalOverlay" class="hfa-msg-overlay" style="display: none;" aria-hidden="true">
          <div id="hfaMsgModal" class="hfa-msg-modal" role="dialog" aria-modal="true" aria-labelledby="hfaMsgTitle">

            <!-- top-right close -->
            <button id="hfaMsgClose" class="hfa-msg-close" aria-label="Close message modal">
              <i class="fas fa-times" aria-hidden="true"></i>
            </button>

            <header class="hfa-msg-header">
              <div class="hfa-msg-title-wrap">
                <h3 id="hfaMsgTitle" class="hfa-msg-title">Send Message</h3>
                <div class="hfa-msg-sub">Send email </div>
              </div>

              <div class="hfa-msg-actions">
                <button id="hfaMsgSendBtn" class="hfa-msg-btn hfa-msg-btn-primary small">Send</button>
                <button id="hfaMsgCancelBtn" class="hfa-msg-btn small">Cancel</button>
              </div>
            </header>

            <div class="hfa-msg-body">
              <div class="hfa-msg-grid">
                <div class="hfa-msg-row">
                  <label class="hfa-msg-label" for="hfaMsgRecipient">Recipient Email</label>
                  <input id="hfaMsgRecipient" class="hfa-msg-input" type="email" placeholder="email@example.com" />
                </div>
                <div class="hfa-msg-row full">
                  <label class="hfa-msg-label" for="hfaMsgSubject">Subject</label>
                  <input id="hfaMsgSubject" class="hfa-msg-input" type="text" placeholder="Subject" />
                </div>

                <div class="hfa-msg-row full">
                  <label class="hfa-msg-label" for="hfaMsgBody">Message</label>
                  <textarea id="hfaMsgBody" class="hfa-msg-textarea" rows="8" placeholder="Type message..."></textarea>
                </div>

                <div class="hfa-msg-row full">
                  <div id="hfaMsgError" class="hfa-msg-error" aria-live="polite"></div>
                </div>
              </div>
            </div>

            <footer class="hfa-msg-footer">
              <small class="hfa-msg-tip">Tip: personalize the message before sending.</small>
            </footer>

          </div>
        </div>

        <!-- Notification view modal - Simple design -->
        <div id="notificationModalOverlay" class="notification-modal-overlay" style="display: none;">
          <div id="notificationModal" class="notification-modal-box">
            <button id="notificationModalClose" class="notification-modal-close" aria-label="Close">
              <i class="fas fa-times"></i>
            </button>
            <div class="notification-modal-content">
              <h3 id="notificationModalTitle" class="notification-modal-title">Notification</h3>
              <div id="notificationModalSender" class="notification-modal-sender"></div>
              <div id="notificationModalMessage" class="notification-modal-message"></div>
              <div id="notificationModalDate" class="notification-modal-date"></div>
            </div>
          </div>
        </div>

        <!-- View Message Detail Modal - Simple design -->
        <div id="viewMessageModalOverlay" class="view-message-modal-overlay" style="display: none;">
          <div id="viewMessageModal" class="view-message-modal-box">
            <button id="viewMessageModalClose" class="view-message-modal-close" aria-label="Close">
              <i class="fas fa-times"></i>
            </button>
            <div class="view-message-modal-content">
              <h3 class="view-message-modal-title">Message Details</h3>
              <div id="viewMessageModalFrom" class="view-message-modal-from"></div>
              <div id="viewMessageModalSubject" class="view-message-modal-subject"></div>
              <div id="viewMessageModalBody" class="view-message-modal-body"></div>
              <div id="viewMessageModalAttachment" class="view-message-modal-attachment"></div>
              <div id="viewMessageModalDate" class="view-message-modal-date"></div>
            </div>
          </div>
        </div>

        <!-- Toast container -->
        <template id="toast-template">
          <div class="applicant-toast">
            <div class="toast-message" aria-atomic="true"></div>
            <button type="button" class="toast-action"></button>
          </div>
        </template>
      </section>

      <!-- application status content -->
      <section id="application-status">
        <!-- application-status-content -->
        <div class="app-status-card">

          <!-- Paste this inside #status-content (teacher.html) -->
          <div class="status-card">
            <div class="status-card-header">
              <h3>Application Details</h3>
              <button id="status-refresh-btn" class="btn small">Refresh</button>
            </div>

            <div class="status-card-body two-column">
              <div class="status-col left">
                <div class="field"><label>Full name</label>
                  <div class="value"><span id="status-fullname">—</span></div>
                </div>
                <div class="field"><label>Email</label>
                  <div class="value"><span id="status-email">—</span></div>
                </div>
                <div class="field"><label>Phone</label>
                  <div class="value"><span id="status-phone">—</span></div>
                </div>
                <div class="field"><label>Address</label>
                  <div class="value"><span id="status-address">—</span></div>
                </div>
                <div class="field"><label>Birthdate</label>
                  <div class="value"><span id="status-birthdate">—</span></div>
                </div>

                <div class="field"><label>Preferred level</label>
                  <div class="value"><span id="status-preferred-level">—</span></div>
                </div>
                <div class="field"><label>Degree</label>
                  <div class="value"><span id="status-degree">—</span></div>
                </div>
                <div class="field"><label>Major</label>
                  <div class="value"><span id="status-major">—</span></div>
                </div>
              </div>

              <div class="status-col right">
                <div class="field"><label>Institution</label>
                  <div class="value"><span id="status-institution">—</span></div>
                </div>
                <div class="field"><label>Graduation Year</label>
                  <div class="value"><span id="status-gradyear">—</span></div>
                </div>
                <div class="field"><label>Experience (years)</label>
                  <div class="value"><span id="status-experience">—</span></div>
                </div>
                <div class="field"><label>Previous Schools</label>
                  <div class="value"><span id="status-previous-schools">—</span></div>
                </div>
                <div class="field"><label>Subjects</label>
                  <div class="value"><span id="status-subjects">—</span></div>
                </div>
                <div class="field"><label>Employment</label>
                  <div class="value"><span id="status-employment">—</span></div>
                </div>
              </div>
            </div>

            <div class="status-card-footer">
              <small id="status-submitted-at">Submitted: —</small>
            </div>
          </div>


          <aside class="app-status-right">
            <div class="progress-card-enhanced">
              <div class="progress-header-enhanced">
                <div>
                  <h3 class="progress-title-enhanced">Application Progress</h3>
                  <div id="submitted-at-timeline" class="progress-sub-enhanced">Submitted: —</div>
                </div>
              </div>

              <div id="app-status-timeline" class="status-timeline-enhanced">
                <div class="timeline-item" data-step="submitted">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>Application Submitted</h3>
                    <p class="timeline-desc">Your application documents have been received.</p>
                  </div>
                </div>

                <div class="timeline-item" data-step="screening">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>Initial Screening</h3>
                    <p class="timeline-desc">Your qualifications are being reviewed.</p>
                  </div>
                </div>

                <div class="timeline-item" data-step="interview">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>Interview Scheduled</h3>
                    <p class="timeline-desc" id="status-interview-desc-text">Interview will be scheduled by Admissions.</p>
                    <div id="status-interview-info" class="interview-details" style="display:none;">
                      <div class="detail-row"><strong>Date:</strong> <span id="status-interview-date">—</span></div>
                      <div class="detail-row"><strong>Location:</strong> <span id="status-interview-details">—</span></div>
                    </div>
                  </div>
                </div>

                <div class="timeline-item" data-step="demo">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>Demo Teaching</h3>
                    <p class="timeline-desc">Will be scheduled after successful interview.</p>
                  </div>
                </div>

                <div class="timeline-item" data-step="result">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>Pass or Fail</h3>
                    <p class="timeline-desc">Will be determined after the demo teaching.</p>
                  </div>
                </div>

                <div class="timeline-item" data-step="decision">
                  <div class="timeline-marker"></div>
                  <div class="timeline-content">
                    <h3>On boarding</h3>
                    <p class="timeline-desc">Administration will review all evaluation results.</p>
                  </div>
                </div>
              </div>
            </div>
          </aside>

        </div>
      </section>

      <!-- Profile Settings Section -->
      <section id="profile-settings" style="display: none;">
        <div class="profile-settings-container">
          <div class="section-header">
            <h2><i class="fas fa-user-cog"></i> Profile Settings</h2>
          </div>

          <div class="profile-content-grid">
            <!-- Left: Profile Form Card -->
            <div class="profile-form-card">
              <h3>Personal Information</h3>
              
              <!-- Display Name (Read-only for teacher) -->
              <div class="profile-field">
                <label class="profile-current-label">Your Display Name</label>
                <div class="profile-current-value" id="display-name-text">Loading...</div>
                <small class="help-text"><i class="fas fa-lock"></i> Only administrators can change your display name</small>
              </div>

              <div class="profile-separator"></div>

              <!-- Email (Read-only) -->
              <div class="profile-field">
                <label class="profile-current-label">Your Email Address</label>
                <div class="profile-current-value" id="email-text">Loading...</div>
              </div>

              <div class="profile-separator"></div>

              <!-- Phone Number -->
              <div class="profile-field">
                <label class="profile-current-label">Current Phone Number</label>
                <div class="profile-current-value profile-not-set" id="current-phone-text">Not set</div>
              </div>

              <div class="form-group">
                <label>Update Phone Number</label>
                <div class="phone-input-wrapper">
                  <span class="phone-prefix">+63</span>
                  <input type="text" id="profile-phone" maxlength="10" placeholder="9123456789" />
                </div>
                <small class="help-text">Enter your 10-digit mobile number</small>
              </div>

              <button id="save-profile-btn" class="btn primary">
                <i class="fas fa-save"></i> Save Changes
              </button>
            </div>

            <!-- Right: Change Password Card -->
            <div class="password-change-card">
              <h3>Change Password</h3>
              
              <div class="form-group">
                <label>Current Password</label>
                <input type="password" id="current-password" placeholder="Enter current password" autocomplete="current-password" />
              </div>

              <div class="form-group">
                <label>New Password</label>
                <input type="password" id="new-password" placeholder="Enter new password" autocomplete="new-password" />
              </div>

              <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" id="confirm-password" placeholder="Re-enter new password" autocomplete="new-password" />
              </div>

              <!-- Password Requirements -->
              <div class="password-requirements">
                <div class="requirements-title">
                  <i class="fas fa-info-circle"></i> Password Requirements:
                </div>
                <ul class="requirements-list">
                  <li>At least 8 characters long</li>
                  <li>Must contain letters (a-z, A-Z)</li>
                  <li>Must contain numbers (0-9)</li>
                  <li>Cannot be the same as current password</li>
                </ul>
              </div>

              <button id="change-password-btn" class="btn secondary">
                <i class="fas fa-key"></i> Update Password
              </button>
            </div>
          </div>

          <!-- Success/Error Messages -->
          <div id="profile-message" class="message-container" style="display: none;"></div>
        </div>
      </section>
    </main>
    <script type="module" src="teacher.js"></script>
    <script type="module" src="date.js"></script>
  </body>

</html>