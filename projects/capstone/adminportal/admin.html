<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> AlpHFAbet: Admin Portal</title>
        <link rel="stylesheet" href="admin.css">
        <link rel="stylesheet" href="admincontent.css">
        <link rel="stylesheet" href="messagemodal.css">
        <link rel="stylesheet" href="progressmodal.css">
        <link rel="stylesheet" href="calendar.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
        <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>

        <script type="module" src="../check-auth.js"></script>
    </head>

    <body>
        <!-- navbar -->
        <header>
            <nav class="navbar">

                <button id="open-sidebar" title="open-sidebar"><i class="fas fa-bars"></i></button>
                <a href="#" class="logo">
                    <img href="#" src="../assets/transparent_logo.png" alt="school_logo">
                </a>
                <h3 class="schoolname">Holy Family Academy of Sta Maria Bulacan Inc.</h3>

                <div class="nav-icons">
                    <a href="#mail" title="Mail" class="nav-icon">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>

            </nav>
        </header>
        <!-- sidebar -->

        <aside class="sidebar">
            <button id="close-sidebar" title="close-sidebar"><i class="fas fa-times"></i></button>

            <div class="user-info">
                <h3 class="admin-name">Admin Name</h3>
            </div>

            <!-- sidebar -->
            <nav class="sidebar-nav">
                <ul class="sidebar-links">

                    <li>
                        <a href="#dashboard"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
                        </a>
                    </li>

                    <li>
                        <a href="#Student-management"><i class="fas fa-user-graduate"></i> <span>Student
                                Management</span>
                        </a>
                    </li>

                    <li>
                        <a href="#applicant-tracker"><i class="fas fa-clipboard-check">
                            </i> <span>Applicants Tracker</span></a>
                    </li>
                    <li>
                        <a href="#User-management"><i class="fas fa-users-cog"></i> <span>User Management</span>
                        </a>
                    </li>
                    <li>
                        <a href="#announcements" class="dropdown-toggle">
                            <i class="fas fa-bullhorn"></i> <span>Announcement</span>
                        </a>

                    </li>
                </ul>
                <!-- secondary sidebar -->
                <nav class="secondary-sidebar">
                    <ul class="sidebar-links">
                        <li>
                            <a href="#school-calendar"><i class="fas fa-calendar-alt"></i> School Calendar</a>
                        </li>

                        <li>
                            <a href="#profile-settings"><i class="fas fa-user-cog"></i> Profile Settings</a>
                        </li>
                        <li class="logout-link"><a href="#" class="logout-btn" id="logout-btn"><i
                                    class="fas fa-sign-out-alt"></i>
                                Sign Out</a>
                        </li>
                    </ul>
                </nav>
            </nav>
        </aside>

        <!-- Admin Dashboard -->
        <main class="admin-content">

            <section id="dashboard">
                <div class="main-content">
                    <!-- Dashboard Header -->
                    <div class="dashboard-header">
                        <div>
                            <h1>Administrator Dashboard</h1>
                            <p class="subtitle">School Portal â€¢ Overview</p>
                        </div>

                        <div class="header-actions">
                            <div class="datetime-widget" aria-live="polite" aria-atomic="true">
                                <div class="current-date" id="current-date">September 25, 2025</div>
                                <div class="current-time" id="current-time">9:52 PM</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <div class="stat-card total-students">
                            <div class="stat-top">
                                <h3><i class="fas fa-user-graduate"></i> Total Students</h3>
                                <span class="stat-pill">Enrollees</span>
                            </div>
                            <p class="stat-value" id="stat-total-students">â€”</p>

                        </div>

                        <div class="stat-card total-teachers">
                            <div class="stat-top">
                                <h3><i class="fas fa-chalkboard-teacher"></i> Teacher Applicants</h3>
                                <span class="stat-pill">Applicants</span>
                            </div>
                            <p class="stat-value" id="stat-teacher-apps">â€”</p>

                        </div>
                    </div>

                    <!-- Enrollment + Recent Activity -->
                    <div class="analytics-grid">
                        <!-- Enrollment status (left) -->
                        <div class="analytics-card enrollment-card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-user-clock"></i> Enrollment Status</h3>
                            </div>

                            <div class="enrollment-progress" id="enrollment-progress">
                                <div class="progress-item">
                                    <div class="label">Completed</div>
                                    <div class="count" id="enroll-completed">0</div>
                                </div>
                                <div class="progress-bar">
                                    <div id="bar-completed" class="bar-fill" style="width:0%"></div>
                                </div>

                                <div class="progress-item">
                                    <div class="label">Pending Verification</div>
                                    <div class="count" id="enroll-pending">0</div>
                                </div>
                                <div class="progress-bar small">
                                    <div id="bar-pending" class="bar-fill" style="width:0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Submissions (right) -->
                        <div class="analytics-card recent-submissions-card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-inbox"></i> Recent Submissions</h3>
                            </div>

                            <div class="recent-submissions-body">
                                <p class="muted" style="margin:0 0 10px 0;">Latest enrollments & applicant submissions
                                </p>

                                <ul id="recent-submissions-list" class="recent-submissions-list" aria-live="polite">
                                    <!-- Example static item shown when empty or for design preview â€” JS will render items -->
                                    <li class="submission-item empty">
                                        <div class="submission-left">
                                            <div class="submission-title">No recent submissions</div>
                                            <div class="submission-meta muted">â€”</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Row: Quick Notes (left) +recent activcity on wide screens -->
                    <div class="dashboard-two-column">
                        <!-- Quick Notes -->
                        <div class="card quick-notes-card">
                            <div class="card-header small">
                                <h3><i class="fas fa-sticky-note"></i> Quick Notes</h3>
                            </div>
                            <div class="card-body">
                                <p class="muted">Personal notes for quick reminders</p>
                                
                                <!-- Note input row -->
                                <div class="note-row">
                                    <input id="note-input" placeholder="Write a quick note" 
                                        aria-label="Quick note input" maxlength="500">
                                    <button id="add-note" class="btn-add-note" type="button">Add</button>
                                </div>
                                
                                <!-- Character counter -->
                                <div class="note-counter" id="note-counter">
                                    <small class="muted">0 / 500 characters</small>
                                </div>
                                
                                <!-- Notes list -->
                                <ul id="note-list" class="noteList" aria-live="polite">
                                    <!-- Empty state (shown when no notes) -->
                                    <li class="note-empty" id="note-empty">
                                        <i class="fas fa-sticky-note"></i>
                                        <p>No notes yet. Add your first note!</p>
                                    </li>
                                </ul>
                                
                                <!-- Template for each note item -->
                                <template id="note-template">
                                    <li class="note-item" data-note-id="">
                                        <!-- Note content (view mode) -->
                                        <div class="note-content">
                                            <div class="note-text"></div>
                                            <div class="note-meta muted">
                                                <small class="note-timestamp"></small>
                                            </div>
                                        </div>
                                        
                                        <!-- Note actions (edit & delete buttons) -->
                                        <div class="note-actions">
                                            <button class="note-edit-btn" title="Edit note" type="button">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="note-delete-btn" title="Delete note" type="button">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                        
                                        <!-- Edit mode (hidden by default) -->
                                        <div class="note-edit-mode" style="display: none;">
                                            <input class="note-edit-input" type="text" maxlength="500">
                                            <div class="note-edit-actions">
                                                <button class="note-save-btn" type="button">
                                                    <i class="fas fa-check"></i> Save
                                                </button>
                                                <button class="note-cancel-btn" type="button">
                                                    <i class="fas fa-times"></i> Cancel
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Delete confirmation (hidden by default) -->
                                        <div class="note-delete-confirm" style="display: none;">
                                            <div class="delete-confirm-message">
                                                <i class="fas fa-exclamation-triangle"></i>
                                                <span>Delete this note?</span>
                                            </div>
                                            <p class="delete-confirm-text">This action cannot be undone.</p>
                                            <div class="delete-confirm-actions">
                                                <button class="note-confirm-delete-btn" type="button">
                                                    <i class="fas fa-trash"></i> Delete
                                                </button>
                                                <button class="note-cancel-delete-btn" type="button">
                                                    <i class="fas fa-times"></i> Cancel
                                                </button>
                                            </div>
                                        </div>
                                    </li>
                                </template>
                            </div>
                        </div>
                        <!-- RECENT ACTIVITY -->
                       <div class="operations-card activity-card">
                                <div class="card-header">
                                    <h3 class="card-title"><i class="fa-solid fa-clock-rotate-left"></i> Recent Activity
                                    </h3>
                                </div>

                                <div class="table-wrap">
                                    <table class="activity-table">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Activity</th>
                                                <th>User</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recent-activity-body">
                                            <tr>
                                                <td>â€”</td>
                                                <td>No recent activity</td>
                                                <td>â€”</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                    </div>

                    <!-- Quick Task Center -->
                    <div class="operations-grid">
                      

                        <!-- Announcement & Enrollment Period Row -->
                        <div class="dashboard-announcement-enrollment-row">
                            <!-- Announcements & News Dashboard Card -->
                            <div class="operations-card announcements-card">
                                <div class="updates-header">
                                    <h3><i class="fas fa-bullhorn"></i> Announcement & News</h3>
                                    <div class="header-actions">
                                        <button id="post-ann-btn" class="btn-post-ann" type="button">
                                            <i class="fas fa-plus"></i> Post
                                        </button>
                                        <a id="view-all-ann" href="#announcements" class="view-all-btn">
                                            View All <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>

                                <!-- Announcements Preview List -->
                                <div class="updates-list" id="announcements-list">
                                    <!-- Empty State (shown when no data) -->
                                    <div class="ann-empty-state" id="ann-empty-state">
                                        <div class="empty-icon">
                                            <i class="fas fa-inbox"></i>
                                        </div>
                                        <p class="empty-text">No announcements or news posted yet</p>
                                        <p class="empty-subtext">Click "Post" to create your first announcement</p>
                                    </div>
                                    <!-- Preview items will be injected here by JS -->
                                </div>
                            </div>

                            <!-- Enrollment Period Dashboard Card -->
                            <div class="operations-card enrollment-period-card">
                                <div class="updates-header">
                                    <h3><i class="fas fa-calendar-alt"></i> Enrollment Period</h3>
                                    <button id="manage-enrollment-btn" class="btn-icon-only" type="button" title="Manage enrollment periods">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>

                                <div class="enrollment-status-container">
                                    <!-- JHS Status -->
                                    <div class="enrollment-level-status">
                                        <div class="level-header">
                                            <span class="level-icon">ðŸ“š</span>
                                            <span class="level-name">Junior High School</span>
                                        </div>
                                        <div class="status-info">
                                            <span id="jhs-status-badge" class="status-badge">Loading...</span>
                                            <span id="jhs-days-info" class="days-info"></span>
                                        </div>
                                        <!-- Start/Close buttons for JHS -->
                                        <div class="enrollment-actions">
                                            <button id="jhs-start-btn" class="enrollment-action-btn start-btn" type="button" style="display:none;">
                                                Start Enrollment
                                            </button>
                                            <button id="jhs-close-btn" class="enrollment-action-btn close-btn" type="button" style="display:none;">
                                                Close Enrollment
                                            </button>
                                        </div>
                                    </div>

                                    <!-- SHS Status -->
                                    <div class="enrollment-level-status">
                                        <div class="level-header">
                                            <span class="level-icon">ðŸŽ“</span>
                                            <span class="level-name">Senior High School</span>
                                        </div>
                                        <div class="status-info">
                                            <span id="shs-status-badge" class="status-badge">Loading...</span>
                                            <span id="shs-days-info" class="days-info"></span>
                                        </div>
                                        <!-- Start/Close buttons for SHS -->
                                        <div class="enrollment-actions">
                                            <button id="shs-start-btn" class="enrollment-action-btn start-btn" type="button" style="display:none;">
                                                Start Enrollment
                                            </button>
                                            <button id="shs-close-btn" class="enrollment-action-btn close-btn" type="button" style="display:none;">
                                                Close Enrollment
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Hidden modals (interview add/edit and announcement post) -->
                    <!-- Interview Modal -->
                    <div class="interview-modal" id="interview-modal" role="dialog" aria-hidden="true" aria-modal="true"
                        style="display:none;">
                        <div class="interview-modal-content">
                            <h3 id="interview-modal-title">Add Interview</h3>
                            <label>Title <input id="interview-title" type="text"></label>
                            <label>Applicant (name or email) <input id="interview-applicant" type="text"></label>
                            <label>Date <input id="interview-date" type="date"></label>
                            <label>Time <input id="interview-time" type="time"></label>
                            <label>Notes <textarea id="interview-notes"></textarea></label>
                            <div class="interview-modal-actions">
                                <button id="interview-save" class="btn-primary" type="button">Save</button>
                                <button id="interview-cancel" type="button" class="task-btn outline">Cancel</button>
                            </div>
                        </div>
                    </div>
                    <!-- toast for uploading in announcement -->
                    <div id="upload-toast-container" aria-live="polite" aria-atomic="true"></div>
                </div>
            </section>
            <!--Student Management -->
            <section id="Student-management">
                <div class="section-header">
                    <h2><i class="fas fa-user-graduate"></i> Student Management</h2>
                </div>

                <!-- Tabs -->
                <div class="content-tabs">
                    <button class="tab-btn active" data-tab="all">All Applicants</button>
                    <button class="tab-btn" data-tab="jhs">JHS Applicants</button>
                    <button class="tab-btn" data-tab="shs">SHS Applicants</button>
                    <button class="tab-btn" data-tab="enrolled">Enrolled</button>
                    <button class="tab-btn" data-tab="archived">Archived</button>
                </div>

                <!-- Counts -->
                <div class="quick-stats" id="counts-row">
                    <div class="stat-card">
                        <h3><i class="fas fa-users"></i> Total Applicants</h3>
                        <p id="count-total">0</p>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-user-check"></i> Enrolled</h3>
                        <p id="count-enrolled">0</p>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-file-alt"></i> Complete Requirements</h3>
                        <p id="count-complete">0</p>
                    </div>
                </div>

                <!-- Filters / Search -->
                <div class="tracker-controls">
                    <div class="search-sort">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input id="search-input" type="text" placeholder="Search Students by name, id, grade...">
                        </div>

                        <select id="filter-status" aria-label="Filter Status" class="sort-select">
                            <option value="all">All</option>
                            <option value="new">New Students</option>
                            <option value="old">Old Students</option>
                            <option value="incomplete">Incomplete Requirements</option>
                            <option value="complete">Complete Requirements</option>
                        </select>

                        <select id="sort-by" aria-label="Sort By" class="sort-select">
                            <option value="recent">Newest</option>
                            <option value="name">Name</option>
                            <option value="grade">Grade</option>
                        </select>
                    </div>

                    <div class="view-options">
                        <button class="view-option active" data-view="table">Table View</button>

                    </div>
                </div>

                <!-- Table view -->
                <div class="records-table applicant-table" id="table-view" >
                    <table>
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Grade</th>
                                <th>Form</th>
                                <th>Old/New</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>

                        <!-- row template that JS will clone for each student  -->
                        <template id="student-row-template">
                            <!-- data-id should be set by JS to the Firestore document id -->
                            <tr data-id="">
                                <td class="cell-studentid">-</td>
                                <td class="cell-name">-</td>
                                <td class="cell-grade">-</td>
                                <td class="cell-form">-</td>
                                <td class="cell-oldnew">-</td>
                                <td class="cell-status">-</td>
                                <td class="student-actions">
                                    <button class="student-btn student-view" title="View"><i class="fas fa-eye"
                                            aria-hidden="true"></i></button>
                                    <button class="student-btn student-archive" title="Archive"><i
                                            class="fas fa-archive" aria-hidden="true"></i></button>
                                    <button class="student-btn student-delete" title="Delete"><i class="fas fa-trash"
                                            aria-hidden="true"></i></button>
                                    <button class="student-btn student-enroll" title="Enroll">Enroll</button>
                                </td>
                            </tr>
                        </template>

                        <tbody id="students-body"></tbody>
                    </table>
                </div>

                <!-- Pagination Controls -->
                <div class="pagination-controls" id="pagination-controls" style="display: none;">
                    <button id="prev-page" class="pagination-btn" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <div class="pagination-info">
                        Page <span id="current-page-num">1</span> of <span id="total-pages-num">1</span>
                        <span class="pagination-count">(<span id="showing-count">0</span> of <span id="total-count">0</span> students)</span>
                    </div>
                    <button id="next-page" class="pagination-btn" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>


            </section>

            <!-- ====== Student Detail Modal  ====== -->
            <!-- ====== HFA Student Detail Modal (namespaced: hfa-stu-*) ====== -->
            <div id="hfa-stu-modal-overlay" class="hfa-stu-modal-overlay" style="display:none;">
                <div id="hfa-stu-modal" class="hfa-stu-modal-content" role="dialog" aria-modal="true"
                    aria-labelledby="hfa-stu-title">

                    <header class="hfa-stu-header">
                        <div class="hfa-stu-header-left">
                            <h3 id="hfa-stu-title" class="hfa-stu-name">Student Name</h3>
                            <div class="hfa-stu-sub" id="hfa-stu-subtitle">
                            <span id="systemID"> -</span> â€¢ <span id="hfa-stu-type">SHS</span> â€¢ <span id="hfa-stu-grade">Grade 12</span> 
                            </div>
                        </div>

                        <div class="hfa-stu-actions">
                            <button id="hfa-stu-edit-btn" class="btn small">Edit</button>
                            <button id="hfa-stu-archive-btn" class="btn danger small">Archive</button>
                        
                        </div>
                    </header>

                    <div class="hfa-stu-body">
                        <div class="hfa-stu-grid">
                            <!-- LEFT: Requirements -->
                            <aside class="hfa-stu-left">
                                <h4>Requirements</h4>
                                <div class="hfa-stu-req-scroll">
                                    <ul id="hfa-stu-requirements-list" class="hfa-stu-req-list">
                                        <!-- JS populates checkboxes -->
                                    </ul>
                                </div>
                            </aside>

                            <!-- RIGHT: Info + Documents -->
                            <section class="hfa-stu-right">
                                <div class="hfa-stu-info-section">
                                    <h4>Student Information</h4>
                                    <div class="hfa-stu-info-grid">
                                        <div class="hfa-stu-info-item"><strong>Student ID</strong>
                                            <div id="hfa-stu-id" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>First Name</strong>
                                            <div id="hfa-stu-first" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Last Name</strong>
                                            <div id="hfa-stu-last" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Middle Name</strong>
                                            <div id="hfa-stu-middle" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Birthdate</strong>
                                            <div id="hfa-stu-birth" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Contact</strong>
                                            <div id="hfa-stu-contact" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Email</strong>
                                            <div id="hfa-stu-email" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item hfa-stu-full"><strong>Address</strong>
                                            <div id="hfa-stu-address" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Grade</strong>
                                            <div id="hfa-stu-grade2" class="hfa-stu-info-value">-</div>
                                        </div>
                                        <div class="hfa-stu-info-item"><strong>Track</strong>
                                            <div id="hfa-stu-track" class="hfa-stu-info-value">-</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="hfa-stu-docs-section">
                                    <h4>Uploaded Documents</h4>
                                    <div id="hfa-stu-documents" class="hfa-stu-docs-list">
                                        <div class="hfa-stu-doc-empty">No files uploaded yet.</div>
                                    </div>
                                </div>

                                <div id="hfa-stu-inline-confirm" class="hfa-stu-inline-confirm" style="display:none;">
                                    <div id="hfa-stu-confirm-msg" class="hfa-stu-confirm-msg">Are you sure?</div>
                                    <div class="hfa-stu-confirm-actions">
                                        <button id="hfa-stu-confirm-yes" class="btn danger">Yes</button>
                                        <button id="hfa-stu-confirm-no" class="btn">Cancel</button>
                                    </div>
                                </div>

                            </section>
                        </div>
                    </div>

                    <footer class="hfa-stu-footer">
                        <div class="hfa-stu-footer-left">
                            <small class="hfa-stu-note">Last updated: <span id="hfa-stu-updated">â€”</span></small>
                        </div>
                        <div class="hfa-stu-footer-right">
                            <button id="hfa-stu-close-2" class="btn">Close</button>
                        </div>
                    </footer>
                </div>
            </div>
            <!-- ====== End HFA Student Modal ====== -->
            <!-- Enrollment confirmation -->
            <div class="enroll-modal" id="enroll-modal" style="display: none;">
                <div class="enroll-content" id="enroll-content">
                    <span class="enroll-close-btn" id="enroll-close-btn" aria-label="Close"></button>
                        <i class="fas fa-times"></i>
                    </span>
                    <h3>Enroll Confirmation</h3>

                    <p class="enroll-message-confirmation">Are you sure you want to enroll this student?</p>
                    <div class="enroll-footer">
                        <button id="enroll-cancel-btn" class="enroll-cancel-btn" aria-label="Cancel enrollment">Cancel</button>
                        <button id="confirm-enroll-btn" class="confirm-enroll-btn">Confirm</button>
                    </div>
                </div>
            </div>

            <!-- ===== Message Modal ===== -->
            <div id="hfaMsgModalOverlay" class="hfa-msg-overlay" style="display: none;" aria-hidden="true">
                <div id="hfaMsgModal" class="hfa-msg-modal" role="dialog" aria-modal="true"
                    aria-labelledby="hfaMsgTitle">

                    <!-- top-right close -->
                    <button id="hfaMsgClose" class="hfa-msg-close" aria-label="Close message modal">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>

                    <header class="hfa-msg-header">
                        <div class="hfa-msg-title-wrap">
                            <h3 id="hfaMsgTitle" class="hfa-msg-title">Send Message</h3>
                            <div class="hfa-msg-sub">Send email to the selected applicant</div>
                        </div>

                        <div class="hfa-msg-actions">
                            <button id="hfaMsgSendBtn" class="hfa-msg-btn hfa-msg-btn-primary small">Send</button>
                            <button id="hfaMsgCancelBtn" class="hfa-msg-btn small">Cancel</button>
                        </div>
                    </header>

                    <div class="hfa-msg-body">
                        <div class="hfa-msg-grid">
                            <div class="hfa-msg-row">
                                <label class="hfa-msg-label" for="hfaMsgRecipient">Recipient Email</label>
                                <input id="hfaMsgRecipient" class="hfa-msg-input" type="email"
                                    placeholder="applicant@example.com" />
                            </div>

                            <div class="hfa-msg-row">
                                <label class="hfa-msg-label">Phone (for display)</label>
                                <div id="hfaMsgPhone" class="hfa-msg-info">â€”</div>
                            </div>

                            <div class="hfa-msg-row full">
                                <label class="hfa-msg-label" for="hfaMsgSubject">Subject</label>
                                <input id="hfaMsgSubject" class="hfa-msg-input" type="text"
                                    placeholder="Welcome to Holy Family Academy" />
                            </div>

                            <div class="hfa-msg-row full">
                                <label class="hfa-msg-label" for="hfaMsgBody">Message</label>
                                <textarea id="hfaMsgBody" class="hfa-msg-textarea" rows="8"
                                    placeholder="Type message..."></textarea>
                            </div>

                            <div class="hfa-msg-row full">
                                <div id="hfaMsgError" class="hfa-msg-error" aria-live="polite"></div>
                            </div>
                        </div>
                    </div>

                    <footer class="hfa-msg-footer">
                        <small class="hfa-msg-tip">Tip: personalize the message before sending.</small>
                    </footer>

                </div>
            </div>
            <!-- ===== End HFA Message Modal ===== -->
            <!-- Toast container -->
            <div id="admin-toast-container" aria-live="polite"></div>

            <!-- Toast template -->
            <template id="toast-template">
                <div class="admin-toast">
                    <div class="toast-message" aria-atomic="true"></div>
                    <button type="button" class="toast-action"></button>
                </div>
            </template>


            <!-- Teacher Applicants Tracker -->
            <section id="applicant-tracker">
                <div class="section-header">
                    <h2><i class="fas fa-chalkboard-teacher"></i> Teacher Applicants</h2>
                    <button id="teacher-archived-btn" class="btn-archived" type="button" aria-pressed="false">
                        <i class="fas fa-archive"></i> Show Archived
                    </button>
                </div>

                <!-- Stats Overview -->
                <div class="teacher-stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon new">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="new-teachers-count">0</span>
                            <span class="stat-label">New Applications</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon review">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="review-teachers-count">0</span>
                            <span class="stat-label">Under Review</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon interview">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="interview-teachers-count">0</span>
                            <span class="stat-label">Interview Scheduled</span>
                        </div>
                    </div>

                </div>

                <!-- Filters and Search -->
                <div class="teacher-controls">
                    <div class="search-filter-row">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="teacher-search" placeholder="Search by name, email, subject...">
                        </div>
                        <div class="filter-group">
                            <select aria-label="Teacher Status Filter" id="teacher-status-filter" class="filter-select">
                                <option value="">All Status</option>
                                <option value="new">New</option>
                                <option value="screening">Initial Screening</option>
                                <option value="interview_scheduled">Interview Scheduled</option>
                                <option value="demo">Demo Teaching</option>
                                <option value="result">Pass or Fail</option>
                                <option value="onboarding">Onboarding</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <select aria-label="Teacher Level Filter" id="teacher-level-filter" class="filter-select">
                                <option value="">All Levels</option>
                                <option value="Junior High School">Junior High School</option>
                                <option value="Senior High School">Senior High School</option>
                            </select>
                        </div>
                    </div>
                    <div class="view-toggle">
                        <button type="button" class="view-btn active" id="teacher-grid-view-toggle"
                            aria-label="Grid view">
                            <i class="fas fa-th-large" aria-hidden="true"></i>
                        </button>
                        <button type="button" class="view-btn" id="teacher-table-view-toggle" aria-label="Table view">
                            <i class="fas fa-list" aria-hidden="true"></i>
                        </button>
                    </div>


                </div>

                <!-- Grid View -->
                <div class="teacher-applicants-grid" id="teacher-grid-view">
                    <!-- Cards will be dynamically inserted here -->
                </div>
                <!-- Table View -->
                <div class="teacher-applicants-table" id="teacher-table-view" style="display: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Contact</th>
                                <th>Position</th>
                                <th>Experience</th>
                                <th>Applied Date</th>
                                <th>Status</th>
                                <th>Documents</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="teacher-table-body">
                            <!-- Rows will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <button class="btn-prev" id="teacher-prev-page" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <span class="page-info">
                        Page <span id="teacher-current-page">1</span> of <span id="teacher-total-pages">1</span>
                    </span>
                    <button class="btn-next" id="teacher-next-page">
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>

            <template id="teacher-card-template">
                <div class="teacher-card" data-id="">
                    <div class="teacher-card-header">
                        <div class="teacher-basic-info">
                            <h3 class="applicant-name">Full Name</h3>
                            <p class="applicant-level">Preferred Level</p>
                            <p class="applied-date">Applied: --</p>
                        </div>
                        <span class="teacher-status-badge status-new">New</span>
                    </div>

                    <div class="teacher-card-body">
                        <div class="teacher-details">
                            <div class="detail-item email">
                                <i class="fas fa-envelope"></i>
                                <span class="applicant-email">email@example.com</span>
                            </div>
                            <div class="detail-item phone">
                                <i class="fas fa-phone"></i>
                                <span class="applicant-phone">0912xxxxxxx</span>
                            </div>
                            <div class="detail-item degree">
                                <i class="fas fa-graduation-cap"></i>
                                <span class="applicant-degree">Degree</span>
                            </div>
                            <div class="detail-item experience">
                                <i class="fas fa-briefcase"></i>
                                <span class="applicant-exp">0 years</span>
                            </div>
                        </div>

                        <div class="teacher-qualifications">
                            <strong>Subjects:</strong>
                            <div class="qualification-tags"></div>
                        </div>
                    </div>


                    <div class="teacher-card-footer">
                        <button class="btn btn-view-teacher" type="button" title="View">
                            <i class="fas fa-eye"></i> View
                        </button>
                        <button class="btn btn-message-teacher" type="button" title="Message">
                            <i class="fas fa-envelope"></i> Message
                        </button>
                        <button class="btn btn-hfa-progress" type="button" title="Progress">
                            <i class="fas fa-tasks"></i> Progress
                        </button>
                        <button class="btn btn-archive" type="button" title="Archive">
                            <i class="fas fa-archive"></i> Archive
                        </button>
                    </div>
                </div>
            </template>

            <!-- Teacher Applicant Detail Modal -->
            <div id="teacher-detail-modal" class="modal">
                <div class="modal-content teacher-modal">
                    <div class="modal-header">
                        <div class="modal-header-left">
                            <h3 id="teacher-modal-name">Applicant Details</h3>
                            <div class="modal-status">
                                <span id="teacher-modal-status" class="status-badge">New</span>
                                <span id="teacher-modal-id" class="application-id">APP-000000</span>
                            </div>
                        </div>
                        <button class="close-teacher-modal" id="close-teacher-modal" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Application Info Section (NEW) -->
                    <div class="application-info-section">
                        <div class="app-info-item">
                            <i class="fas fa-calendar-check"></i>
                            <div>
                                <span class="app-info-label">Submitted</span>
                                <span class="app-info-value" id="modal-submitted-date">--</span>
                            </div>
                        </div>
                        <div class="app-info-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <span class="app-info-label">Interview</span>
                                <span class="app-info-value" id="modal-interview-time">Not scheduled</span>
                            </div>
                        </div>
                        <div class="app-info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <span class="app-info-label">Location</span>
                                <span class="app-info-value" id="modal-interview-location">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- 2x2 Button Grid (NEW) -->
                    <div class="modal-action-grid">
                        <button class="grid-action-btn" id="view-details-btn">
                            <i class="fas fa-eye"></i>
                            <span>View Details</span>
                        </button>
                        <button class="grid-action-btn" id="message-applicant-btn">
                            <i class="fas fa-envelope"></i>
                            <span>Message</span>
                        </button>
                        <button class="grid-action-btn" id="view-progress-btn">
                            <i class="fas fa-tasks"></i>
                            <span>View Progress</span>
                        </button>
                        <button class="grid-action-btn" id="archive-applicant-btn">
                            <i class="fas fa-archive"></i>
                            <span>Archive</span>
                        </button>
                    </div>

                    <div class="teacher-modal-body">
                        <!-- Left Column - Personal & Professional Info -->
                        <div class="modal-left-column">
                            <div class="info-section">
                                <h4><i class="fas fa-user"></i> Personal Information</h4>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>Full Name:<input id="input-modal-firstName" type="text"
                                                class="modal-input" style="display:none" placeholder="First name"><input
                                                id="input-modal-middleName" type="text" class="modal-input"
                                                style="display:none" placeholder="Middle name"><input
                                                id="input-modal-lastName" type="text" class="modal-input"
                                                style="display:none" placeholder="Last name"></label>
                                        <span id="modal-teacher-fullname"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Email:<input id="input-modal-email" type="email" class="modal-input"
                                                style="display:none" placeholder="Email"></label>
                                        <span id="modal-teacher-email"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Contact:<input id="input-modal-contactNumber" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Contact number"></label>
                                        <span id="modal-teacher-contact"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Address: <input id="input-modal-address" type="text" class="modal-input"
                                                style="display:none" placeholder="Address"></label>
                                        <span id="modal-teacher-address"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Birth Date:<input id="input-modal-birthdate" type="date"
                                                class="modal-input" style="display:none"></label>
                                        <span id="modal-teacher-birthdate"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="info-section">
                                <h4><i class="fas fa-graduation-cap"></i> Educational Background</h4>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>Highest Degree: <input id="input-modal-highestDegree" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Highest degree"></label>
                                        <span id="modal-teacher-degree"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Major:<input id="input-modal-major" type="text" class="modal-input"
                                                style="display:none" placeholder="Major"></label>
                                        <span id="modal-teacher-major"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Institution:<input id="input-modal-institution" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Institution"></label>
                                        <span id="modal-teacher-institution"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Year Graduated:<input id="input-modal-gradYear" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Graduation year"></label>
                                        <span id="modal-teacher-gradyear"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="info-section">
                                <h4><i class="fas fa-briefcase"></i> Professional Information</h4>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>Teaching Experience: <input id="input-modal-experienceYears"
                                                type="number" class="modal-input" style="display:none"
                                                placeholder="Years of experience"></label>
                                        <span id="modal-teacher-experience"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Previous Schools:<input id="input-modal-previousSchools" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Previous schools (comma separated)"></label>
                                        <span id="modal-teacher-schools"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Preferred Level:<input id="input-modal-preferredLevel" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Preferred level"></label>
                                        <span id="modal-teacher-level"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Subjects: <input id="input-modal-qualifiedSubjects" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Subjects (comma separated)"></label>
                                        <span id="modal-teacher-subjects"></span>
                                    </div>
                                    <div class="info-item">
                                        <label>Employment Type: <input id="input-modal-employmentType" type="text"
                                                class="modal-input" style="display:none"
                                                placeholder="Employment type"></label>
                                        <span id="modal-teacher-employment"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Right Column - Documents & Actions -->
                        <div class="modal-right-column">
                            <div class="info-section">
                                <h4><i class="fas fa-folder-open"></i> Submitted Documents</h4>
                                <div class="documents-list" id="modal-teacher-documents">
                                    <!-- Documents will be listed here -->
                                </div>
                            </div>
                        </div>
                        <!-- Personal info inputs -->
                        <!-- Edit action area (buttons shown only in edit mode) -->
                        <div id="teacher-edit-controls" style="display:none; margin-top:12px;">
                            <div id="teacher-edit-error" class="field-error"
                                style="display:none; color:#b91c1c; margin-bottom:8px;"></div>
                            <button id="teacher-edit-save" class="btn btn-primary">Save</button>
                            <button id="teacher-edit-discard" class="btn btn-secondary">Discard changes</button>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <div class="action-buttons">
                            <button class="btn btn-info" id="edit-teacher-btn">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-primary" id="approve-teacher-btn">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger" id="reject-teacher-btn">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Interview Modal -->
            <div id="schedule-interview-modal" class="modal">
                <div class="modal-content modal-small">
                    <h3>Schedule Interview</h3>
                    <form id="schedule-interview-form">
                        <div class="form-group">
                            <label>Date</label>
                            <input aria-label="Interview Date" type="date" id="interview-input-date" required>
                        </div>
                        <div class="form-group">
                            <label>Time</label>
                            <input aria-label="Interview Time" type="time" id="interview-input-time" required>
                        </div>
                        <div class="form-group">
                            <label>Interview Mode</label>
                            <select aria-label="Interview Mode" id="interview-input-mode" required>
                                <option value="">Select Mode</option>
                                <option value="In-Person">In-Person</option>
                                <option value="Online">Online (Video Call)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Location/Link</label>
                            <input type="text" id="interview-input-location" placeholder="Room number or meeting link">
                        </div>
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea id="interview-input-notes" placeholder="Additional instructions..."></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Schedule</button>
                            <button type="button" class="btn btn-secondary" id="cancel-schedule">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Message Applicant Modal -->
            <div id="message-applicant-modal" class="modal">
                <div class="modal-content modal-medium">
                    <div class="message-modal-header">
                        <h3><i class="fas fa-envelope"></i> Send Message to Applicant</h3>
                        <button class="close-message-modal" id="close-message-modal" aria-label="Close modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="message-applicant-form">
                        <div class="form-group">
                            <label for="message-recipient-email">To:</label>
                            <input 
                                type="email" 
                                id="message-recipient-email" 
                                readonly 
                                placeholder="recipient@example.com"
                                class="readonly-input"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="message-subject">Subject:</label>
                            <input 
                                type="text" 
                                id="message-subject" 
                                placeholder="Enter message subject"
                                required
                                maxlength="200"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="message-body">Message:</label>
                            <textarea 
                                id="message-body" 
                                placeholder="Type your message here..."
                                required
                                rows="8"
                                maxlength="2000"
                            ></textarea>
                            <div class="char-counter">
                                <span id="message-char-count">0</span> / 2000 characters
                            </div>
                        </div>
                        
                        <!-- Attachment Upload -->
                        <div class="form-group">
                            <label for="message-attachment">Attachment (Optional):</label>
                            <div class="attachment-upload-area">
                                <input 
                                    type="file" 
                                    id="message-attachment" 
                                    accept=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"
                                    style="display: none;"
                                >
                                <button type="button" class="btn-upload-attachment" id="btn-select-attachment">
                                    <i class="fas fa-paperclip"></i> Choose File
                                </button>
                                <div id="message-attachment-preview" class="attachment-preview" style="display: none;">
                                    <div class="attachment-info">
                                        <i class="fas fa-file"></i>
                                        <span id="message-attachment-name">No file selected</span>
                                        <span id="message-attachment-size"></span>
                                    </div>
                                    <button type="button" class="btn-remove-attachment" id="btn-remove-attachment">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <small class="attachment-hint">Max 10MB. Allowed: PDF, DOC, DOCX, XLS, XLSX, PNG, JPG</small>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="send-message-btn">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancel-message-btn">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- HFA Progress Modal (updated â€” includes static action controls for interview & decision) -->
            <div class="hfa-progress-modal" id="hfa-progress-modal" role="dialog" aria-labelledby="hfa-progress-title"
                style="display:none;">
                <div class="hfa-progress-content" id="hfa-progress-content">
                    <!-- close -->
                    <button id="hfa-progress-close" class="hfa-progress-close"
                        aria-label="Close progress dialog">Ã—</button>

                    <!-- header -->
                    <div id="hfa-progress-header">
                        <h3 id="hfa-progress-title" class="hfa-progress-title">Applicant Progress</h3>
                        <small id="hfa-progress-applicant-id" class="progress-muted">APP-xxxxxx</small>
                    </div>

                    <!-- applicant summary row -->
                    <div id="hfa-progress-applicant-info" class="hfa-progress-applicant-info">
                        <div class="info-left">
                            <div id="hfa-progress-name" class="hfa-progress-name">Applicant Name</div>
                            <div id="hfa-progress-status" class="hfa-progress-status">Status: <span>New</span></div>
                        </div>
                        <div class="info-right">
                            <button id="hfa-progress-open-interview-btn" class="btn small">Open Interview</button>
                        </div>
                    </div>

                    <!-- steps list (rendered by JS as before) -->
                    <div id="hfa-progress-steps" class="hfa-progress-steps" aria-live="polite">
                        <!-- JS will render the step items here -->
                    </div>

                    <!-- Interview panel -->
                    <div id="hfa-progress-interview-panel" class="hfa-progress-interview-panel">
                        <h4>Interview</h4>
                        <div id="hfa-progress-interview-info" class="hfa-progress-interview-info">
                            <!-- default no-interview view -->
                            <div class="hfa-no-interview" id="hfa-progress-no-interview">
                                <p>No interview scheduled</p>
                            </div>

                            <!-- scheduled view -->
                            <div class="hfa-progress-interview-scheduled" id="hfa-progress-interview-scheduled"
                                style="display:none;">
                                <div class="hfa-interview-details">
                                    <div><strong>Date:</strong> <span id="hfa-progress-interview-date">â€”</span></div>
                                    <div><strong>Time:</strong> <span id="hfa-progress-interview-time">â€”</span></div>
                                    <div><strong>Location:</strong> <span id="hfa-progress-interview-location">â€”</span>
                                    </div>
                                </div>

                                <!-- static action buttons (Reschedule / Cancel) â€” JS will just show/hide and wire handlers -->
                                <div class="hfa-interview-actions" id="hfa-progress-interview-actions">
                                    <button id="hfa-progress-reschedule-btn" class="btn btn-secondary" type="button">
                                        <i class="fas fa-edit" aria-hidden="true"></i> Reschedule
                                    </button>
                                    <button id="hfa-progress-cancel-interview-btn" class="btn btn-danger" type="button">
                                        <i class="fas fa-times" aria-hidden="true"></i> Cancel Interview
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Demo Teaching panel -->
                    <div id="hfa-progress-demo-panel" class="hfa-progress-demo-panel" style="display:none;">
                        <h4>Demo Teaching</h4>
                        <div id="hfa-progress-demo-info" class="hfa-progress-demo-info">
                            <!-- default no-demo view -->
                            <div class="hfa-no-demo" id="hfa-progress-no-demo">
                                <p>No demo teaching scheduled</p>
                                <button id="hfa-progress-schedule-demo-btn" class="btn btn-success" type="button">
                                    <i class="fas fa-chalkboard-teacher"></i> Schedule Demo Teaching
                                </button>
                            </div>

                            <!-- scheduled view -->
                            <div class="hfa-progress-demo-scheduled" id="hfa-progress-demo-scheduled" style="display:none;">
                                <div class="hfa-demo-details">
                                    <div><strong>Date:</strong> <span id="hfa-progress-demo-date">â€”</span></div>
                                    <div><strong>Time:</strong> <span id="hfa-progress-demo-time">â€”</span></div>
                                    <div><strong>Mode:</strong> <span id="hfa-progress-demo-mode">â€”</span></div>
                                    <div><strong>Location:</strong> <span id="hfa-progress-demo-location">â€”</span></div>
                                </div>

                                <!-- action buttons (Reschedule / Cancel / Mark Complete) -->
                                <div class="hfa-demo-actions" id="hfa-progress-demo-actions">
                                    <button id="hfa-progress-reschedule-demo-btn" class="btn btn-secondary" type="button">
                                        <i class="fas fa-edit"></i> Reschedule
                                    </button>
                                    <button id="hfa-progress-cancel-demo-btn" class="btn btn-danger" type="button">
                                        <i class="fas fa-times"></i> Cancel Demo
                                    </button>
                                    <button id="hfa-progress-complete-demo-btn" class="btn btn-primary" type="button">
                                        <i class="fas fa-check"></i> Mark Completed
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Decision area (static) â€” JS will show this when appropriate -->
                    <div id="hfa-progress-decision" class="hfa-progress-decision" style="display:none;">
                        <h4>Final Decision</h4>
                        <div class="decision-actions" id="hfa-progress-decision-actions">
                            <button id="hfa-progress-approve-btn" class="btn btn-primary" type="button">
                                <i class="fas fa-check" aria-hidden="true"></i> Approve
                            </button>
                            <button id="hfa-progress-reject-btn" class="btn btn-danger" type="button">
                                <i class="fas fa-times" aria-hidden="true"></i> Reject
                            </button>
                        </div>
                    </div>
                    <!-- actions -->
                    <div class="hfa-progress-actions">
                        <button id="hfa-progress-save-btn" class="btn btn-primary">Save</button>
                        <button id="hfa-progress-cancel-btn" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
            <!-- End HFA Progress Modal -->
            <!-- Toast container  -->
            <div id="toast-container" aria-live="polite" class="toast-stack"></div>

            <template id="toast-template">
                <div class="toast">
                    <dXiv class="toast-body">
                        <span class="toast-msg"></span>
                        <button class="toast-action" type="button" style="display:none">Undo</button>
                        <button class="toast-close" aria-label="Close">Ã—</button>
                </div>
                </div>
            </template>


            <!-- User Management -->
            <section id="User-management">
                <div class="section-header">
                    <h2><i class="fas fa-users-cog"></i> User Management</h2>
                    <div class="action-buttons">
                        <button class="btn-add-user"><i class="fas fa-user-plus"></i> Add User</button>
                    </div>
                </div>

                <div class="user-management-tabs">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="accounts">User Accounts</button>
                        <button class="tab-btn" data-tab="activity">Activity Log</button>
                         <button class="tab-btn" data-tab="archived">Archived</button>
                    </div>

                    <div class="tab-content active" id="accounts">
                        <div class="user-filters">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Search users...">
                            </div>
                            <select aria-label="Role Filter" class="role-filter">
                                <option>All Roles</option>
                                <option>Administrator</option>
                                <option>Teacher</option>
                            </select>
                            
                            <!-- Sync Teacher Names Button -->
                            <button id="sync-teacher-names-btn" class="btn btn-secondary" style="margin-left: 10px;">
                                <i class="fas fa-sync"></i> Sync Teacher Names
                            </button>

                        </div>
                        
                        <!-- User Row Template - Cloned by JavaScript for each user -->
                        <template id="user-row-template">
                            <tr data-user-id="" data-user-status="">
                                <!-- Name Cell -->
                                <td class="name-cell">
                                    <div class="user-name"></div>
                                    <div class="muted small user-meta"></div>
                                </td>
                                
                                <!-- Email Cell -->
                                <td class="email-cell"></td>
                                
                                <!-- Role Cell -->
                                <td class="role-cell">
                                    <span class="badge"></span>
                                </td>
                                
                                <!-- Created Cell -->
                                <td class="created-cell hide-mobile"></td>
                                
                                <!-- Actions Cell -->
                                <td class="actions-cell">
                                    <!-- Inline Actions (Desktop) -->
                                    <div class="actions-inline">
                                        <!-- View Button (always visible) -->
                                        <button class="table-action-btn btn-view" data-action="view" title="View">
                                            <i class="fas fa-eye" aria-hidden="true"></i>
                                            <span class="tooltip">View profile</span>
                                        </button>
                                        
                                        <!-- Edit Button (active users only) -->
                                        <button class="table-action-btn btn-edit" data-action="edit" title="Edit">
                                            <i class="fas fa-pen" aria-hidden="true"></i>
                                            <span class="tooltip">Edit</span>
                                        </button>
                                        
                                        <!-- Reset Password Button (active users only) -->
                                        <button class="table-action-btn btn-reset" data-action="reset-password" title="Reset password">
                                            <i class="fas fa-key" aria-hidden="true"></i>
                                            <span class="tooltip">Reset password</span>
                                        </button>
                                        
                                        <!-- Unarchive Button (archived users only) -->
                                        <button class="table-action-btn btn-unarchive" data-action="unarchive" title="Unarchive" style="display: none;">
                                            <i class="fas fa-undo" aria-hidden="true"></i>
                                            <span class="tooltip">Unarchive</span>
                                        </button>
                                        
                                        <!-- Dropdown Menu -->
                                        <div class="action-dropdown">
                                            <details class="dropdown-details">
                                                <summary class="dropdown-summary table-action-btn" aria-haspopup="true">
                                                    <i class="fas fa-ellipsis-v" aria-hidden="true"></i>
                                                    <span class="tooltip">More</span>
                                                </summary>
                                                <div class="dropdown-menu" role="menu">
                                                    <!-- Archive (active users) -->
                                                    <button class="dropdown-item btn-archive" data-action="archive">Archive</button>
                                                    
                                                    <!-- Unarchive (archived users) -->
                                                    <button class="dropdown-item btn-unarchive-dropdown" data-action="unarchive" style="display: none;">Unarchive</button>
                                                    
                                                    <!-- Delete (always visible) -->
                                                    <button class="dropdown-item danger btn-delete" data-action="delete" data-archived-only="true">Delete (hard)</button>
                                                </div>
                                            </details>
                                        </div>
                                    </div>
                                    
                                    <!-- Mobile Actions -->
                                    <div class="actions-collapse">
                                        <details class="mobile-actions">
                                            <summary class="mobile-summary table-action-btn">
                                                <i class="fas fa-ellipsis-h" aria-hidden="true"></i>
                                            </summary>
                                            <div class="mobile-menu">
                                                <!-- View (always visible) -->
                                                <button class="mobile-item mobile-view" data-action="view">View profile</button>
                                                
                                                <!-- Edit (active users only) -->
                                                <button class="mobile-item mobile-edit" data-action="edit">Edit</button>
                                                
                                                <!-- Reset (active users only) -->
                                                <button class="mobile-item mobile-reset" data-action="reset-password">Reset password</button>
                                                
                                                <!-- Archive (active users only) -->
                                                <button class="mobile-item mobile-archive" data-action="archive">Archive</button>
                                                
                                                <!-- Unarchive (archived users only) -->
                                                <button class="mobile-item mobile-unarchive" data-action="unarchive" style="display: none;">Unarchive</button>
                                                
                                                <!-- Delete (always visible) -->
                                                <button class="mobile-item danger mobile-delete" data-action="delete" data-archived-only="true">Delete (hard)</button>
                                            </div>
                                        </details>
                                    </div>
                                </td>
                            </tr>
                        </template>
                        
                        <div class="table-responsive">
                            <table class="users-table" aria-describedby="usersTableDesc">
                                <caption id="usersTableDesc" class="sr-only">List of all admin and applicant users
                                </caption>

                                <thead>
                                    <tr>
                                        <th class="col-name">Name</th>
                                        <th class="col-email">Email</th>
                                        <th class="col-role">Role</th>
                                        <th class="col-created hide-mobile">Created</th>
                                        <th class="col-actions actions-cell">Actions</th>
                                    </tr>
                                </thead>

                                <tbody id="users-tbody">
                                    <!-- Active users will be populated here by JavaScript using the template above -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- activity logs -->
                    <div class="tab-content" id="activity">
                        <!-- Activity Log Settings & Controls -->
                        <div class="activity-controls">
                            <div class="activity-settings-group">
                                <label class="activity-toggle-wrapper">
                                    <input type="checkbox" id="auto-clean-toggle" class="activity-toggle-input">
                                    <span class="activity-toggle-slider"></span>
                                    <span class="activity-toggle-label">
                                        <i class="fas fa-magic"></i> Auto-clean logs (>90 days, weekly)
                                    </span>
                                </label>
                                
                                <button id="btn-manual-clean" class="btn-manual-clean" style="display: none;">
                                    <i class="fas fa-trash-alt"></i> Clean Old Logs (>90 days)
                                </button>
                            </div>

                            <div class="activity-actions-group">
                                <select id="activity-limit" class="activity-limit-select" aria-label="Number of logs to display">
                                    <option value="25">Show 25 logs</option>
                                    <option value="50" selected>Show 50 logs</option>
                                    <option value="100">Show 100 logs</option>
                                </select>
                                
                                <button id="btn-refresh-logs" class="btn-refresh-logs">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>

                        <!-- Activity Log Container -->
                        <div id="activity-log-container" class="activity-log-container">
                            <!-- Loading State -->
                            <div class="activity-log-loading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Loading activity logs...</p>
                            </div>

                            <!-- Empty State -->
                            <div class="activity-log-empty" style="display: none;">
                                <i class="fas fa-clipboard-list"></i>
                                <p>No activity logs found.</p>
                            </div>

                            <!-- Error State -->
                            <div class="activity-log-error" style="display: none;">
                                <i class="fas fa-exclamation-triangle"></i>
                                <p class="error-message">Failed to load activity logs.</p>
                                <button class="btn-retry"><i class="fas fa-redo"></i> Retry</button>
                            </div>

                            <!-- Activity Log List (populated by JavaScript) -->
                            <div class="activity-log-list"></div>
                        </div>
                    </div>
                    
                    <!-- Archived users tab -->
                    <div class="tab-content" id="archived">
                        <!-- Same table structure as accounts tab, but will show only archived users -->
                        <div class="table-responsive">
                            <table class="users-table" aria-describedby="archivedUsersTableDesc">
                                <caption id="archivedUsersTableDesc" class="sr-only">List of archived users</caption>
                                <thead>
                                    <tr>
                                        <th class="col-name">Name</th>
                                        <th class="col-email">Email</th>
                                        <th class="col-role">Role</th>
                                        <th class="col-created hide-mobile">Created</th>
                                        <th class="col-actions actions-cell">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="archived-users-tbody">
                                    <!-- Archived users will be populated here by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                        <!-- User Management Specific Modals -->
        <div id="user-mgmt-modal-overlay" class="user-mgmt-modal-overlay"></div>
        
        <!-- User Management View Modal -->
        <div id="user-mgmt-view-modal" class="user-mgmt-modal">
            <div class="user-mgmt-modal-content">
                <div class="user-mgmt-modal-header">
                    <h3>User Details</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <div class="user-mgmt-details">
                        <div class="user-mgmt-detail-row">
                            <label>Name:</label>
                            <span id="user-mgmt-view-name">-</span>
                        </div>
                        <div class="user-mgmt-detail-row">
                            <label>Email:</label>
                            <span id="user-mgmt-view-email">-</span>
                        </div>
                        <div class="user-mgmt-detail-row">
                            <label>Phone Number:</label>
                            <span id="user-mgmt-view-phone">Not set</span>
                        </div>
                        <div class="user-mgmt-detail-row">
                            <label>Role:</label>
                            <span id="user-mgmt-view-role">-</span>
                        </div>
                        <div class="user-mgmt-detail-row">
                            <label>Created:</label>
                            <span id="user-mgmt-view-created">-</span>
                        </div>
                        <div class="user-mgmt-detail-row">
                            <label>User ID:</label>
                            <span id="user-mgmt-view-id">-</span>
                        </div>
                    </div>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button class="user-mgmt-btn-cancel">Close</button>
                </div>
            </div>
        </div>

        <!-- User Management Edit Modal -->
        <div id="user-mgmt-edit-modal" class="user-mgmt-modal">
            <div class="user-mgmt-modal-content">
                <div class="user-mgmt-modal-header">
                    <h3>Edit User</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <form id="user-mgmt-edit-form">
                        <div class="user-mgmt-form-group">
                            <label for="user-mgmt-edit-name">Display Name:</label>
                            <input type="text" id="user-mgmt-edit-name" name="displayName" required>
                        </div>
                        <div class="user-mgmt-form-group">
                            <label>Role:</label>
                            <span id="user-mgmt-edit-role-text">-</span>
                        </div>
                        <input type="hidden" id="user-mgmt-edit-id" name="uid">
                    </form>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" class="user-mgmt-btn-cancel">Cancel</button>
                    <button type="button" class="user-mgmt-btn-save">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- User Management Confirmation Modal -->
        <div id="user-mgmt-confirm-modal" class="user-mgmt-modal">
            <div class="user-mgmt-modal-content user-mgmt-modal-small">
                <div class="user-mgmt-modal-header">
                    <h3 id="user-mgmt-confirm-title">Confirm Action</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <p id="user-mgmt-confirm-message">Are you sure?</p>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" class="user-mgmt-btn-cancel">Cancel</button>
                    <button type="button" class="user-mgmt-btn-confirm">Confirm</button>
                </div>
            </div>
        </div>

        <!-- User Management Notification Modal -->
        <div id="user-mgmt-notify-modal" class="user-mgmt-modal">
            <div class="user-mgmt-modal-content user-mgmt-modal-small">
                <div class="user-mgmt-modal-header">
                    <h3 id="user-mgmt-notify-title">Notification</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <p id="user-mgmt-notify-message">Operation completed.</p>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" class="user-mgmt-btn-ok">OK</button>
                </div>
            </div>
        </div>

        <!-- Admin creation step 1: collect profile fields for the new admin -->
        <div id="um-admin-create-modal" class="user-mgmt-modal um-admin-modal">
            <div class="user-mgmt-modal-content um-admin-content">
                <div class="user-mgmt-modal-header">
                    <h3>Create Admin</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <form id="um-admin-create-form" class="um-admin-form" autocomplete="off">
                        <div class="user-mgmt-form-group">
                            <label for="um-admin-name">Display Name</label>
                            <input type="text" id="um-admin-name" name="displayName" required>
                        </div>
                        <div class="user-mgmt-form-group">
                            <label for="um-admin-email">Email</label>
                            <input type="email" id="um-admin-email" name="email" required>
                        </div>
                        <div class="user-mgmt-form-group">
                            <label for="um-admin-phone">Phone (optional)</label>
                            <div class="phone-input-wrapper">
                                <span class="country-code">+63</span>
                                <input type="tel" id="um-admin-phone" name="phoneNumber" placeholder="9123456789" maxlength="10" pattern="[0-9]*" inputmode="numeric">
                            </div>
                            <small class="phone-hint">Enter 10 digits starting with 9 (e.g., 9123456789)</small>
                        </div>
                        <div class="user-mgmt-form-group super-priv-row">
                            <label>
                                <input type="checkbox" id="um-admin-make-super" />
                                <span>Grant Super Admin privileges</span>
                            </label>
                            <small class="phone-hint">Warning: Super admins can add users, reset passwords, archive and delete accounts.</small>
                        </div>
                    </form>
                    <div id="um-admin-create-error" class="um-admin-error" role="alert" aria-live="polite"></div>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" class="user-mgmt-btn-cancel">Cancel</button>
                    <button type="button" id="um-admin-send-otp" class="user-mgmt-btn-primary">Send OTP</button>
                </div>
            </div>
        </div>

        <!-- Admin creation step 2: verify the emailed OTP for the pending admin -->
        <div id="um-admin-otp-modal" class="user-mgmt-modal um-admin-modal">
            <div class="user-mgmt-modal-content um-admin-content">
                <div class="user-mgmt-modal-header">
                    <h3>Verify OTP</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <div class="um-admin-summary">
                        <p><strong>Name:</strong> <span id="um-admin-summary-name">-</span></p>
                        <p><strong>Email:</strong> <span id="um-admin-summary-email">-</span></p>
                    </div>
                    <div class="user-mgmt-form-group">
                        <label for="um-admin-otp">Enter 6-digit OTP</label>
                        <input type="text" id="um-admin-otp" name="otp" inputmode="numeric" maxlength="6" pattern="\d{6}" required>
                    </div>
                    <div id="um-admin-otp-meta" class="um-admin-meta" aria-live="polite"></div>
                    <div id="um-admin-otp-error" class="um-admin-error" role="alert" aria-live="polite"></div>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" class="user-mgmt-btn-cancel">Cancel</button>
                    <button type="button" id="um-admin-resend" class="user-mgmt-btn-secondary">Resend OTP</button>
                    <button type="button" id="um-admin-verify" class="user-mgmt-btn-primary">Verify &amp; Create</button>
                </div>
            </div>
        </div>

        <!-- Admin creation step 3: confirm success and share temporary credentials -->
        <div id="um-admin-success-modal" class="user-mgmt-modal um-admin-modal">
            <div class="user-mgmt-modal-content um-admin-content">
                <div class="user-mgmt-modal-header">
                    <h3>Admin Created</h3>
                    <button class="user-mgmt-modal-close" aria-label="Close">&times;</button>
                </div>
                <div class="user-mgmt-modal-body">
                    <p id="um-admin-success-msg">The admin account has been created. 
                        The temporary password has been sent to your email. Please check your email.
                    </p>
                    <div class="um-admin-summary">
                        <p><strong>Email:</strong> <span id="um-admin-success-email">-</span></p>
                    </div>
                    <p class="um-admin-instructions">Share the credentials securely. The account must change the password on first login.</p>
                </div>
                <div class="user-mgmt-modal-footer">
                    <button type="button" id="um-admin-done" class="user-mgmt-btn-primary">Done</button>
                </div>
            </section>
                <!-- announcement and news -->
            <section id="announcements">
                <!-- Section Header -->
                <div class="section-header">
                    <h2><i class="fas fa-bullhorn"></i> Announcements & News</h2>
                    <div class="action-buttons">
                        <button id="btn-new-announcement" class="btn-post">
                            <i class="fas fa-plus"></i> New Post
                        </button>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="ann-tabs">
                    <button class="ann-tab-btn active" data-type="announcement">
                        <i class="fas fa-bullhorn"></i> Announcements
                    </button>
                    <button class="ann-tab-btn" data-type="news">
                        <i class="fas fa-newspaper"></i> News
                    </button>
                    <button class="ann-tab-btn" data-type="archived">
                        <i class="fas fa-archive"></i> Archived
                    </button>
                </div>

                <!-- Search & Filters -->
                <div class="ann-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="ann-search" placeholder="Search by title or content...">
                    </div>
                    
                    <select aria-label="Category Filter" id="ann-category-filter" class="ann-filter">
                        <option value="all">All Categories</option>
                        <option value="ACADEMIC">Academic</option>
                        <option value="GENERAL">General</option>
                        <option value="EVENT">Event</option>
                        <option value="SPORTS">Sports</option>
                    </select>

                    <select aria-label="Sort Filter" id="ann-sort" class="ann-filter">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="title">Title A-Z</option>
                    </select>
                </div>

                <!-- Announcements Grid (will be populated by JS) -->
                <div id="ann-grid" class="ann-grid">
                    <!-- Cards will be inserted here by JavaScript -->
                </div>

                <!-- Empty State -->
                <div id="ann-empty" class="ann-empty" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <h3>No items found</h3>
                    <p>Try adjusting your filters or create a new post</p>
                </div>

                <!-- Card Template (hidden, cloned by JS) -->
                <template id="ann-card-template">
                    <div class="ann-card" data-id="">
                        <!-- Card Image (optional) -->
                        <div class="ann-card-image">
                            <img src="" alt="Announcement image">
                        </div>
                        
                        <!-- Card Content -->
                        <div class="ann-card-content">
                            <!-- Header with badge -->
                            <div class="ann-card-header">
                                <span class="ann-badge"></span>
                                <span class="ann-category-badge"></span>
                            </div>
                            
                            <!-- Title -->
                            <h3 class="ann-card-title"></h3>
                            
                            <!-- Body preview -->
                            <p class="ann-card-body"></p>
                            
                            <!-- Meta info -->
                            <div class="ann-card-meta">
                                <span class="ann-posted-by">
                                    <i class="fas fa-user"></i> 
                                    <span class="posted-by-name"></span>
                                </span>
                                <span class="ann-date">
                                    <i class="far fa-clock"></i> 
                                    <span class="date-text"></span>
                                </span>
                            </div>

                            <!-- Archive countdown (only for archived items) -->
                            <div class="ann-archive-info" style="display: none;">
                                <i class="fas fa-hourglass-half"></i>
                                <span class="archive-countdown">Deletes in 30 days</span>
                            </div>
                        </div>
                        
                        <!-- Card Actions -->
                        <div class="ann-card-actions">
                            <button class="ann-btn ann-view-btn" title="View details">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="ann-btn ann-edit-btn" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="ann-btn ann-archive-btn" title="Archive">
                                <i class="fas fa-archive"></i>
                            </button>
                            <button class="ann-btn ann-restore-btn" title="Restore" style="display: none;">
                                <i class="fas fa-undo"></i>
                            </button>
                            <button class="ann-btn ann-delete-btn" title="Delete permanently">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </template>
            </section>

            <section id="school-calendar">
                <h2>School Calendar</h2>
                
                <!-- Color Legend -->
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #f59e0b;"></span>
                        <span>Announcements</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #3b82f6;"></span>
                        <span>News</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #10b981;"></span>
                        <span>Interviews</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #f97316;"></span>
                        <span>Demo Teaching</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #8b5cf6;"></span>
                        <span>JHS Enrollment</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: #ec4899;"></span>
                        <span>SHS Enrollment</span>
                    </div>
                </div>

                <div class="Mycalendar">
                    <div class="calendarcontent">
                        <div id="calendar"></div>
                    </div>
                </div>

            </section>

        </section>

        <!-- Calendar Event Details Modal -->
        <div id="calendar-event-modal" class="calendar-event-modal" style="display: none;">
            <div class="calendar-event-modal-content">
                <div class="calendar-event-modal-header">
                    <h3 id="calendar-event-title"></h3>
                    <button class="calendar-event-modal-close" onclick="closeCalendarEventModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="calendar-event-modal-body" id="calendar-event-details">
                    <!-- Event details will be populated here -->
                </div>
                <div class="calendar-event-modal-footer">
                    <button class="btn-calendar-ok" onclick="closeCalendarEventModal()">OK</button>
                </div>
            </div>
        </div>

        <section id="profile-settings" style="display: none;">
            <div class="profile-settings-container">
                <div class="section-header">
                    <h2><i class="fas fa-user-cog"></i> Profile Settings</h2>
                </div>

                <div class="profile-content-grid">
                    <!-- Left: Profile Form Card -->
                    <div class="profile-form-card">
                        <h3>Personal Information</h3>
                        
                        <!-- Display Name (Editable for admin) -->
                        <div class="profile-field">
                            <label class="profile-current-label">Current Display Name</label>
                            <div class="profile-current-value" id="display-name-text">Loading...</div>
                        </div>

                        <div class="form-group">
                            <label>Update Display Name</label>
                            <input type="text" id="profile-displayname" placeholder="Enter your display name" />
                            <small class="help-text">Your name as shown to teachers and students</small>
                        </div>

                        <div class="profile-separator"></div>

                        <!-- Email (Read-only) -->
                        <div class="profile-field">
                            <label class="profile-current-label">Your Email Address</label>
                            <div class="profile-current-value" id="email-text">Loading...</div>
                        </div>

                        <div class="profile-separator"></div>

                        <!-- Phone Number -->
                        <div class="profile-field">
                            <label class="profile-current-label">Current Phone Number</label>
                            <div class="profile-current-value profile-not-set" id="current-phone-text">Not set</div>
                        </div>

                        <div class="form-group">
                            <label>Update Phone Number</label>
                            <div class="phone-input-wrapper">
                                <span class="phone-prefix">+63</span>
                                <input type="text" id="profile-phone" maxlength="10" placeholder="9123456789" />
                            </div>
                            <small class="help-text">Enter your 10-digit mobile number</small>
                        </div>

                        <button id="save-profile-btn" class="btn primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>

                    <!-- Right: Change Password Card -->
                    <div class="password-change-card">
                        <h3>Change Password</h3>
                        
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="current-password" placeholder="Enter current password" autocomplete="current-password" />
                        </div>

                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="new-password" placeholder="Enter new password" autocomplete="new-password" />
                        </div>

                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirm-password" placeholder="Re-enter new password" autocomplete="new-password" />
                        </div>

                        <!-- Password Requirements -->
                        <div class="password-requirements">
                            <div class="requirements-title">
                                <i class="fas fa-info-circle"></i> Password Requirements:
                            </div>
                            <ul class="requirements-list">
                                <li>At least 8 characters long</li>
                                <li>Must contain letters (a-z, A-Z)</li>
                                <li>Must contain numbers (0-9)</li>
                                <li>Cannot be the same as current password</li>
                            </ul>
                        </div>

                        <button id="change-password-btn" class="btn secondary">
                            <i class="fas fa-key"></i> Update Password
                        </button>
                    </div>
                </div>

                <!-- Success/Error Messages -->
                <div id="profile-message" class="message-container" style="display: none;"></div>
            </div>
        </section>

        <!-- Mail Section -->
        <section id="mail" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-envelope"></i> Mail</h2>
                <!-- Compose button removed - Use Applicants â†’ Message for teacher applicants -->
            </div>

            <!-- Tab Navigation -->
            <div class="mail-tabs">
                <button class="mail-tab active" data-tab="inbox">
                    <i class="fas fa-inbox"></i> Inbox
                </button>
                <button class="mail-tab" data-tab="sent">
                    <i class="fas fa-paper-plane"></i> Sent
                </button>
                <button class="mail-tab" data-tab="archived">
                    <i class="fas fa-archive"></i> Archived
                </button>
            </div>

            <!-- Message List -->
            <div id="mail-list" class="mail-list">
                <!-- Messages will be inserted here -->
            </div>

            <!-- Empty State -->
            <div id="mail-empty" class="mail-empty" style="display: none;">
                <i class="fas fa-inbox"></i>
                <h3>No messages</h3>
                <p>Your mailbox is empty</p>
            </div>

            <!-- Message Item Template -->
            <template id="mail-item-template">
                <div class="mail-item" data-id="">
                    <div class="mail-item-content">
                        <div class="mail-item-header">
                            <span class="mail-sender"></span>
                            <span class="mail-date"></span>
                        </div>
                        <div class="mail-subject"></div>
                        <div class="mail-preview"></div>
                    </div>
                    <div class="mail-item-actions">
                        <button class="btn-mail-archive" title="Archive" style="display: none;">
                            <i class="fas fa-archive"></i>
                        </button>
                        <button class="btn-mail-restore" title="Restore" style="display: none;">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="btn-mail-delete" title="Delete Permanently" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </template>
        </section>
    </main>

    <!-- Mail Preview Modal -->
    <div id="mail-preview-modal" class="mail-preview-modal" style="display: none;">
        <div class="mail-preview-modal-content">
            <div class="mail-preview-modal-header">
                <h3 id="mail-preview-subject"></h3>
                <button class="mail-preview-modal-close" onclick="closeMailPreviewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mail-preview-modal-body">
                <div class="mail-preview-meta">
                    <p><strong>From:</strong> <span id="mail-preview-from"></span></p>
                    <p><strong>To:</strong> <span id="mail-preview-to"></span></p>
                    <p><strong>Date:</strong> <span id="mail-preview-date"></span></p>
                    <div id="mail-preview-attachment" style="display: none;">
                        <p><strong>Attachment:</strong> <span id="mail-attachment-name"></span></p>
                    </div>
                </div>
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #e5e5e5;">
                <div class="mail-preview-body">
                    <p id="mail-preview-message"></p>
                </div>
            </div>
            <div class="mail-preview-modal-footer">
                <button class="btn-mail-preview-ok" onclick="closeMailPreviewModal()">OK</button>
            </div>
        </div>
    </div>


    <!-- Announcement Modal - TASK 1: Scrollable with header/body/footer -->
    <div id="post-modal" class="announcement-modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="announcement-modal-content" role="document">
            
            <!-- Modal Header (fixed at top) -->
            <div class="modal-header">
                <h3 class="ann-modal-title">New Post</h3>
            </div>

            <!-- Modal Body (scrollable) -->
            <div class="modal-body">
                <!-- Type Selection -->
                <div class="ann-field">
                    <span class="ann-label">Type</span>
                    <div class="ann-type-selection">
                        <label class="ann-radio-option">
                            <input type="radio" name="ann-type" value="announcement" id="ann-type-announcement" checked />
                            <span class="radio-label">
                                <i class="fas fa-bullhorn"></i>
                                <span>Announcement</span>
                            </span>
                        </label>
                        <label class="ann-radio-option">
                            <input type="radio" name="ann-type" value="news" id="ann-type-news" />
                            <span class="radio-label">
                                <i class="fas fa-newspaper"></i>
                                <span>News</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Title -->
                <label class="ann-field">
                    <span class="ann-label">Title</span>
                    <input id="ann-title" class="ann-input" type="text" placeholder="Enter title" required />
                </label>

                <!-- Body -->
                <label class="ann-field">
                    <span class="ann-label">Body</span>
                    <textarea id="ann-body" class="ann-textarea" rows="4"
                        placeholder="Write the content details" required></textarea>
                </label>

                <!-- Category -->
                <label class="ann-field">
                    <span class="ann-label">Category</span>
                    <select id="ann-category" class="ann-input" required>
                        <option value="">Select category</option>
                        <option value="ACADEMIC">Academic</option>
                        <option value="GENERAL">General</option>
                        <option value="EVENT">Event</option>
                        <option value="SPORTS">Sports</option>
                    </select>
                </label>

                <!-- Image Upload -->
                <div class="ann-image-upload">
                    <label class="ann-image-label">Image (optional)</label>
                    <input id="ann-image" class="ann-image-input" type="file" accept="image/*" />
                    <div id="ann-image-preview" class="ann-image-preview" aria-hidden="true">
                        <img id="ann-image-thumb" class="ann-image-thumb" src=""
                            alt="Post preview" />
                        <button id="ann-image-remove" class="ann-image-remove task-btn outline"
                            type="button">Remove image</button>
                    </div>
                </div>
            </div>

            <!-- Modal Footer (fixed at bottom) -->
            <div class="modal-footer">
                <div class="announcement-modal-actions">
                    <button class="post" id="post-save" type="button">Post</button>
                    <button class="btn-cancel" id="post-cancel" type="button">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    <!-- TASK 2: View Announcement Modal (Read-only) -->
    <div id="view-modal" class="announcement-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display: none;">
        <div class="announcement-modal-content" role="document">
            
            <!-- Modal Header -->
            <div class="modal-header">
                <h3 class="ann-modal-title" id="view-modal-title">View Post</h3>
            </div>

            <!-- Modal Body (scrollable) -->
            <div class="modal-body">
                
                <!-- Type & Category Badges -->
                <div class="view-badges">
                    <span class="view-type-badge" id="view-type-badge"></span>
                    <span class="view-category-badge" id="view-category-badge"></span>
                </div>

                <!-- Image (if exists) -->
                <div id="view-image-container" class="view-image-container" style="display: none;">
                    <img id="view-image" src="" alt="Post image">
                </div>

                <!-- Content -->
                <div class="view-content">
                    <h4>Content:</h4>
                    <p id="view-body"></p>
                </div>

                <!-- Metadata -->
                <div class="view-metadata">
                    <div class="view-meta-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Posted: <strong id="view-date"></strong></span>
                    </div>
                    <div class="view-meta-item" id="view-updated-item" style="display: none;">
                        <i class="fas fa-edit"></i>
                        <span>Last updated: <strong id="view-updated-date"></strong></span>
                    </div>
                    <div class="view-meta-item">
                        <i class="fas fa-user"></i>
                        <span>By: <strong id="view-author"></strong></span>
                    </div>
                    <div class="view-meta-item">
                        <i class="fas fa-info-circle"></i>
                        <span>Status: <strong id="view-status"></strong></span>
                    </div>
                </div>

            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
                <button class="btn-cancel" id="view-modal-close" type="button">Close</button>
            </div>

        </div>
    </div>

    <!-- Enrollment Period Modal -->
    <div id="enrollment-modal" class="announcement-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display: none;">
        <div class="announcement-modal-content enrollment-modal-content" role="document">
            <h3 class="ann-modal-title">ðŸ“… Manage Enrollment Periods</h3>

            <!-- JHS Period Section -->
            <div class="enrollment-period-section">
                <h4 class="period-section-title">ðŸ“š Junior High School</h4>
                <div class="period-date-row">
                    <label class="ann-field">
                        <span class="ann-label">Start Date</span>
                        <input id="jhs-start-date" class="ann-input" type="date" required />
                    </label>
                    <label class="ann-field">
                        <span class="ann-label">End Date</span>
                        <input id="jhs-end-date" class="ann-input" type="date" required />
                    </label>
                </div>
                <div id="jhs-status-preview" class="status-preview"></div>
            </div>

            <!-- SHS Period Section -->
            <div class="enrollment-period-section">
                <h4 class="period-section-title">ðŸŽ“ Senior High School</h4>
                <div class="period-date-row">
                    <label class="ann-field">
                        <span class="ann-label">Start Date</span>
                        <input id="shs-start-date" class="ann-input" type="date" required />
                    </label>
                    <label class="ann-field">
                        <span class="ann-label">End Date</span>
                        <input id="shs-end-date" class="ann-input" type="date" required />
                    </label>
                </div>
                <div id="shs-status-preview" class="status-preview"></div>
            </div>

            <!-- Action Buttons -->
            <div class="announcement-modal-actions">
                <button class="post" id="enrollment-save-btn" type="button">Save Changes</button>
                <button class="btn-cancel" id="enrollment-cancel-btn" type="button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Start Enrollment Modal -->
    <div id="start-enrollment-modal" class="announcement-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display: none;">
        <div class="announcement-modal-content enrollment-modal-content" role="document" style="max-width: 500px;">
            <h3 class="ann-modal-title" id="start-modal-title">ðŸ“… Start Enrollment</h3>
            
            <p style="color: #666; margin-bottom: 20px;">Select the enrollment period dates:</p>
            
            <!-- Date inputs -->
            <div style="display: flex; flex-direction: column; gap: 16px; margin-bottom: 24px;">
                <label class="ann-field">
                    <span class="ann-label">Start Date</span>
                    <input id="start-enrollment-start-date" class="ann-input" type="date" required />
                </label>
                <label class="ann-field">
                    <span class="ann-label">End Date</span>
                    <input id="start-enrollment-end-date" class="ann-input" type="date" required />
                </label>
            </div>

            <!-- Action Buttons -->
            <div class="announcement-modal-actions">
                <button class="post" id="confirm-start-btn" type="button">Confirm Start</button>
                <button class="btn-cancel" id="cancel-start-btn" type="button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Close Enrollment Modal -->
    <div id="close-enrollment-modal" class="announcement-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display: none;">
        <div class="announcement-modal-content enrollment-modal-content" role="document" style="max-width: 450px;">
            <h3 class="ann-modal-title" id="close-modal-title">âš ï¸ Close Enrollment</h3>
            
            <p style="color: #666; margin-bottom: 16px;">Are you sure you want to close <strong id="close-level-name"></strong> enrollment?</p>
            <p style="color: #888; font-size: 14px; margin-bottom: 24px;">
                This will immediately disable enrollment regardless of the end date. Students will not be able to enroll until you start it again.
            </p>

            <!-- Action Buttons -->
            <div class="announcement-modal-actions">
                <button class="post" id="confirm-close-btn" type="button" style="background: #dc2626;">Confirm Close</button>
                <button class="btn-cancel" id="cancel-close-btn" type="button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Simple Alert Modal (replaces all alert() calls) -->
    <div id="alert-modal" class="simple-modal-overlay" style="display: none;">
        <div class="simple-modal-box">
            <div class="simple-modal-icon" id="alert-icon">âœ…</div>
            <div class="simple-modal-message" id="alert-message">Operation completed successfully</div>
            <div class="simple-modal-actions">
                <button class="simple-modal-btn simple-modal-btn-primary" id="alert-ok-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- Simple Confirm Modal -->
    <div id="confirm-modal" class="simple-modal-overlay" style="display: none;">
        <div class="simple-modal-box">
            <div class="simple-modal-icon">âš ï¸</div>
            <div class="simple-modal-message" id="confirm-message">Are you sure?</div>
            <div class="simple-modal-actions">
                <button class="simple-modal-btn simple-modal-btn-secondary" id="confirm-cancel-btn">Cancel</button>
                <button class="simple-modal-btn simple-modal-btn-danger" id="confirm-ok-btn">Confirm</button>
            </div>
        </div>
    </div>

    <!-- API Helper (must load first) -->
    <script type="module" src="../api-fetch.js"></script>

    <script type="module" src="admin.js"></script>
    <script type="module" src="admin-student.js"></script>
    <script type="module" src="admin-applicant.js"></script>
    <script type="module" src="admin-user-management.js"></script>
    <script type="module" src="admin-notes.js"></script>
    <script type="module" src="admin-dashboard.js"></script>
    <script type="module" src="admin-announcement.js"></script>
    <script type="module" src="admin-schoolcalendar.js"></script>
    <script type="module" src="admin-enrollment.js"></script>
    <script type="module" src="admin-mail.js"></script>


</html>